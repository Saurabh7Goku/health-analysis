{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/saurabh/Projects/health-analysis/app/api/gemini.ts"],"sourcesContent":["export async function callGemini(payload: any): Promise<string> {\r\n    \r\n\r\n    const prompt = `\r\n  You are a health expert. Based on the following information, generate personalized health recommendations in bullet points.\r\n  Include fitness, diet with 3 points each.\r\n  Be concise and no need to give extra information just some recommendation\r\n\r\n  Age: ${payload.age}\r\n  Gender: ${payload.gender}\r\n  Height: ${payload.height} cm\r\n  Weight: ${payload.weight} kg\r\n  BMI: ${payload.bmi.value.toFixed(1)} (${payload.bmi.interpretation})\r\n  BMR: ${payload.bmr.toFixed(0)} kcal/day\r\n  Calorie Needs: ${payload.calorieNeeds.toFixed(0)} kcal/day\r\n  Activity Level: ${payload.activityLevel}\r\n\r\n  ${payload.healthConditions ? `\\nHealth Conditions: ${payload.healthConditions}\\nAdd a few extra points on how to manage or improve these conditions.` : ''}\r\n  Return only the bullet points, no explanation.\r\n    `.trim();\r\n\r\n    const apiKey = process.env.GEMINI_API_KEY;\r\n    console.log('Your api key is: '+apiKey);\r\n    if (!apiKey) {\r\n      console.error(\"‚ùå GEMINI_API_KEY is missing\");\r\n      return \"‚Ä¢ Gemini API key is missing.\";\r\n    }\r\n  \r\n    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        contents: [{ parts: [{ text: prompt }] }],\r\n      }),\r\n    });\r\n  \r\n    const data = await res.json();\r\n    // console.log(\"üîç Gemini response:\", JSON.stringify(data, null, 2));\r\n  \r\n    return data?.candidates?.[0]?.content?.parts?.[0]?.text || \"‚Ä¢ Unable to generate recommendations.\";\r\n  }\r\n  "],"names":[],"mappings":";;;AAAO,eAAe,WAAW,OAAY;IAGzC,MAAM,SAAS,CAAC;;;;;OAKb,EAAE,QAAQ,GAAG,CAAC;UACX,EAAE,QAAQ,MAAM,CAAC;UACjB,EAAE,QAAQ,MAAM,CAAC;UACjB,EAAE,QAAQ,MAAM,CAAC;OACpB,EAAE,QAAQ,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,GAAG,CAAC,cAAc,CAAC;OAC9D,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC,GAAG;iBACf,EAAE,QAAQ,YAAY,CAAC,OAAO,CAAC,GAAG;kBACjC,EAAE,QAAQ,aAAa,CAAC;;EAExC,EAAE,QAAQ,gBAAgB,GAAG,CAAC,qBAAqB,EAAE,QAAQ,gBAAgB,CAAC,sEAAsE,CAAC,GAAG,GAAG;;IAEzJ,CAAC,CAAC,IAAI;IAEN,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;IACzC,QAAQ,GAAG,CAAC,sBAAoB;IAChC,IAAI,CAAC,QAAQ;QACX,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,MAAM,MAAM,MAAM,MAAM,CAAC,6FAA6F,EAAE,QAAQ,EAAE;QAChI,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YACnB,UAAU;gBAAC;oBAAE,OAAO;wBAAC;4BAAE,MAAM;wBAAO;qBAAE;gBAAC;aAAE;QAC3C;IACF;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,qEAAqE;IAErE,OAAO,MAAM,YAAY,CAAC,EAAE,EAAE,SAAS,OAAO,CAAC,EAAE,EAAE,QAAQ;AAC7D","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/saurabh/Projects/health-analysis/app/api/calculate/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { callGemini } from '@/app/api/gemini';\r\n\r\nexport async function POST(request: Request) {\r\n    console.log('API /calculate called', new Date().toISOString()); // Debug log\r\n    const data = await request.json();\r\n    const { name, age, gender, height, weight, activityLevel, healthConditions } = data;\r\n\r\n    const heightInMeters = height / 100;\r\n    const bmi = weight / (heightInMeters * heightInMeters);\r\n    let bmiInterpretation = '';\r\n    if (bmi < 18.5) bmiInterpretation = 'Underweight';\r\n    else if (bmi < 25) bmiInterpretation = 'Normal weight';\r\n    else if (bmi < 30) bmiInterpretation = 'Overweight';\r\n    else bmiInterpretation = 'Obese';\r\n\r\n    let bmr: number;\r\n    if (gender === 'male') {\r\n        bmr = 10 * weight + 6.25 * height - 5 * age + 5;\r\n    } else {\r\n        bmr = 10 * weight + 6.25 * height - 5 * age - 161;\r\n    }\r\n\r\n    const activityMultipliers: { [key: string]: number } = {\r\n        sedentary: 1.2,\r\n        lightly: 1.375,\r\n        moderately: 1.55,\r\n        very: 1.725,\r\n    };\r\n    const calorieNeeds = bmr * activityMultipliers[activityLevel];\r\n\r\n    const payload = {\r\n        name,\r\n        age,\r\n        gender,\r\n        height,\r\n        weight,\r\n        activityLevel,\r\n        bmi: { value: bmi, interpretation: bmiInterpretation },\r\n        bmr,\r\n        calorieNeeds,\r\n        ...(healthConditions && { healthConditions }),\r\n    };\r\n\r\n    const text = await callGemini(payload);\r\n\r\n    const recommendations = text\r\n        .split('\\n')\r\n        .filter(line =>\r\n            line.trim().startsWith('‚Ä¢') ||\r\n            line.trim().startsWith('-') ||\r\n            line.trim().startsWith('*')\r\n        )\r\n        .map(line => line.replace(/^[-‚Ä¢*]\\s*/, '').trim());\r\n\r\n    return NextResponse.json({\r\n        name,\r\n        bmi: { value: bmi, interpretation: bmiInterpretation },\r\n        bmr,\r\n        calorieNeeds,\r\n        recommendations,\r\n    });\r\n}"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACvC,QAAQ,GAAG,CAAC,yBAAyB,IAAI,OAAO,WAAW,KAAK,YAAY;IAC5E,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,gBAAgB,EAAE,GAAG;IAE/E,MAAM,iBAAiB,SAAS;IAChC,MAAM,MAAM,SAAS,CAAC,iBAAiB,cAAc;IACrD,IAAI,oBAAoB;IACxB,IAAI,MAAM,MAAM,oBAAoB;SAC/B,IAAI,MAAM,IAAI,oBAAoB;SAClC,IAAI,MAAM,IAAI,oBAAoB;SAClC,oBAAoB;IAEzB,IAAI;IACJ,IAAI,WAAW,QAAQ;QACnB,MAAM,KAAK,SAAS,OAAO,SAAS,IAAI,MAAM;IAClD,OAAO;QACH,MAAM,KAAK,SAAS,OAAO,SAAS,IAAI,MAAM;IAClD;IAEA,MAAM,sBAAiD;QACnD,WAAW;QACX,SAAS;QACT,YAAY;QACZ,MAAM;IACV;IACA,MAAM,eAAe,MAAM,mBAAmB,CAAC,cAAc;IAE7D,MAAM,UAAU;QACZ;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;YAAE,OAAO;YAAK,gBAAgB;QAAkB;QACrD;QACA;QACA,GAAI,oBAAoB;YAAE;QAAiB,CAAC;IAChD;IAEA,MAAM,OAAO,MAAM,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE;IAE9B,MAAM,kBAAkB,KACnB,KAAK,CAAC,MACN,MAAM,CAAC,CAAA,OACJ,KAAK,IAAI,GAAG,UAAU,CAAC,QACvB,KAAK,IAAI,GAAG,UAAU,CAAC,QACvB,KAAK,IAAI,GAAG,UAAU,CAAC,MAE1B,GAAG,CAAC,CAAA,OAAQ,KAAK,OAAO,CAAC,aAAa,IAAI,IAAI;IAEnD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QACrB;QACA,KAAK;YAAE,OAAO;YAAK,gBAAgB;QAAkB;QACrD;QACA;QACA;IACJ;AACJ","debugId":null}}]
}